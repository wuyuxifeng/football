$gwx2_XC_4=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx2_XC_4 || [];
function gz$gwx2_XC_4_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx2_XC_4_1)return __WXML_GLOBAL__.ops_cached.$gwx2_XC_4_1
__WXML_GLOBAL__.ops_cached.$gwx2_XC_4_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'data-v-766ed66b'])
Z([3,'transparent'])
Z([3,'__l'])
Z([3,'__e'])
Z(z[3])
Z([1,false])
Z(z[0])
Z([3,'white'])
Z([[4],[[5],[[5],[[4],[[5],[[5],[1,'^clickLeft']],[[4],[[5],[[4],[[5],[1,'back']]]]]]]],[[4],[[5],[[5],[1,'^clickRight']],[[4],[[5],[[4],[[5],[1,'showShareItem']]]]]]]]])
Z([1,true])
Z([3,'left'])
Z(z[9])
Z([3,'分享'])
Z([3,'e5ee13b0-1'])
Z([[2,'||'],[[2,'=='],[[7],[3,'businessType']],[1,4]],[[2,'=='],[[7],[3,'businessType']],[1,3]]])
Z(z[2])
Z([3,'data-v-766ed66b vue-ref'])
Z([3,'height:1028rpx;position:relative;'])
Z([3,'poster'])
Z([1,2])
Z([3,'e5ee13b0-2'])
Z([[4],[[5],[1,'default']]])
Z(z[2])
Z(z[0])
Z([3,'position:absolute;height: 1048rpx;padding-left:64rpx;padding-right:64rpx;padding-top:48rpx;'])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-3'],[1,',']],[1,'e5ee13b0-2']])
Z(z[21])
Z(z[2])
Z(z[0])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-4'],[1,',']],[1,'e5ee13b0-3']])
Z(z[21])
Z(z[2])
Z(z[0])
Z([3,'width:622rpx; height:806rpx;border-top-left-radius: 24rpx;border-top-right-radius: 24rpx;'])
Z([[7],[3,'shareTopImage']])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-5'],[1,',']],[1,'e5ee13b0-4']])
Z(z[2])
Z(z[0])
Z([3,'position:absolute;top:712rpx;width:622rpx;height:200rpx;background-image:url(https://res.dasheng.top/app/icon/hospitality_share_bottom_bg.png);display:flex;'])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-6'],[1,',']],[1,'e5ee13b0-4']])
Z(z[21])
Z(z[2])
Z(z[0])
Z([3,'width:378rpx;height:100%;padding-left:32rpx;'])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-7'],[1,',']],[1,'e5ee13b0-6']])
Z(z[21])
Z(z[2])
Z(z[0])
Z([3,'line-clamp: 2;text-align:left;width:370rpx;margin-top:32rpx;font-size: 32rpx;color: #061343;font-weight: bold;'])
Z([[6],[[7],[3,'itemdata']],[3,'name']])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-8'],[1,',']],[1,'e5ee13b0-7']])
Z(z[2])
Z(z[0])
Z([3,'margin-top:8rpx;text-align:left;width:370rpx;font-size: 24rpx;color: #999999;line-clamp:2;font-family: PingFangSC-Regular;'])
Z([[2,'+'],[[2,'+'],[[7],[3,'beginTime']],[1,' - ']],[[7],[3,'endTime']]])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-9'],[1,',']],[1,'e5ee13b0-7']])
Z(z[2])
Z(z[0])
Z([3,'width:212rpx;height:100%;text-align: center;'])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-10'],[1,',']],[1,'e5ee13b0-6']])
Z(z[21])
Z(z[2])
Z(z[0])
Z([3,'margin-top:-26rpx; width:152rpx; height:152rpx;border-radius:76rpx;'])
Z([[7],[3,'mpQrcode']])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-11'],[1,',']],[1,'e5ee13b0-10']])
Z(z[2])
Z(z[0])
Z([3,'height:38rpx;margin-top:8rpx;line-height:38rpx;color: #666666;font-size: 24rpx;'])
Z([3,'扫码了解详情'])
Z([[2,'+'],[[2,'+'],[1,'e5ee13b0-12'],[1,',']],[1,'e5ee13b0-10']])
Z(z[2])
Z(z[16])
Z([3,'confirm'])
Z([3,'e5ee13b0-13'])
Z(z[2])
Z(z[16])
Z([3,'verifycode'])
Z([3,'e5ee13b0-14'])
})(__WXML_GLOBAL__.ops_cached.$gwx2_XC_4_1);return __WXML_GLOBAL__.ops_cached.$gwx2_XC_4_1
}
__WXML_GLOBAL__.ops_set.$gwx2_XC_4=z;
__WXML_GLOBAL__.ops_init.$gwx2_XC_4=true;
var x=['./pages_game/gameevent/shareforplan.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx2_XC_4_1()
var lEG=_n('view')
_rz(z,lEG,'class',0,e,s,gg)
var tGG=_mz(z,'uni-nav-bar',['backgroundColor',1,'bind:__l',1,'bind:clickLeft',2,'bind:clickRight',3,'border',4,'class',5,'color',6,'data-event-opts',7,'fixed',8,'leftIcon',9,'statusBar',10,'title',11,'vueId',12],[],e,s,gg)
_(lEG,tGG)
var aFG=_v()
_(lEG,aFG)
if(_oz(z,14,e,s,gg)){aFG.wxVkey=1
var eHG=_mz(z,'l-painter',['bind:__l',15,'class',1,'css',2,'data-ref',3,'pixelRatio',4,'vueId',5,'vueSlots',6],[],e,s,gg)
var bIG=_mz(z,'l-painter-view',['bind:__l',22,'class',1,'css',2,'vueId',3,'vueSlots',4],[],e,s,gg)
var oJG=_mz(z,'l-painter-view',['bind:__l',27,'class',1,'vueId',2,'vueSlots',3],[],e,s,gg)
var xKG=_mz(z,'l-painter-image',['bind:__l',31,'class',1,'css',2,'src',3,'vueId',4],[],e,s,gg)
_(oJG,xKG)
var oLG=_mz(z,'l-painter-view',['bind:__l',36,'class',1,'css',2,'vueId',3,'vueSlots',4],[],e,s,gg)
var fMG=_mz(z,'l-painter-view',['bind:__l',41,'class',1,'css',2,'vueId',3,'vueSlots',4],[],e,s,gg)
var cNG=_mz(z,'l-painter-text',['bind:__l',46,'class',1,'css',2,'text',3,'vueId',4],[],e,s,gg)
_(fMG,cNG)
var hOG=_mz(z,'l-painter-text',['bind:__l',51,'class',1,'css',2,'text',3,'vueId',4],[],e,s,gg)
_(fMG,hOG)
_(oLG,fMG)
var oPG=_mz(z,'l-painter-view',['bind:__l',56,'class',1,'css',2,'vueId',3,'vueSlots',4],[],e,s,gg)
var cQG=_mz(z,'l-painter-image',['bind:__l',61,'class',1,'css',2,'src',3,'vueId',4],[],e,s,gg)
_(oPG,cQG)
var oRG=_mz(z,'l-painter-text',['bind:__l',66,'class',1,'css',2,'text',3,'vueId',4],[],e,s,gg)
_(oPG,oRG)
_(oLG,oPG)
_(oJG,oLG)
_(bIG,oJG)
_(eHG,bIG)
_(aFG,eHG)
}
var lSG=_mz(z,'pup-limit',['bind:__l',71,'class',1,'data-ref',2,'vueId',3],[],e,s,gg)
_(lEG,lSG)
var aTG=_mz(z,'verify-code-popup',['bind:__l',75,'class',1,'data-ref',2,'vueId',3],[],e,s,gg)
_(lEG,aTG)
aFG.wxXCkey=1
aFG.wxXCkey=3
_(r,lEG)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx2_XC_4";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx2_XC_4();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages_game/gameevent/shareforplan.wxml'] = [$gwx2_XC_4, './pages_game/gameevent/shareforplan.wxml'];else __wxAppCode__['pages_game/gameevent/shareforplan.wxml'] = $gwx2_XC_4( './pages_game/gameevent/shareforplan.wxml' );
	;__wxRoute = "pages_game/gameevent/shareforplan";__wxRouteBegin = true;__wxAppCurrentFile__="pages_game/gameevent/shareforplan.js";define("pages_game/gameevent/shareforplan.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
require("../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages_game/gameevent/shareforplan"],{"0fbd":function(e,n,t){},"3ab7":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i}));var i={uniNavBar:function(){return t.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(t.bind(null,"f9b6"))},VerifyCodePopup:function(){return Promise.all([t.e("common/vendor"),t.e("components/VerifyCodePopup/VerifyCodePopup")]).then(t.bind(null,"6689"))}},a=function(){this.$createElement;var e=(this._self._c,this.$previewImageAddress("share_event_type_wx.png")),n=this.$previewImageAddress("share_event_type_friend.png"),t=this.$previewImageAddress("share_event_type_qq.png"),i=this.$previewImageAddress("share_event_type_download.png");this.$mp.data=Object.assign({},{$root:{m0:e,m1:n,m2:t,m3:i}})},o=[]},"4d10":function(e,n,t){"use strict";var i=t("7b4f");t.n(i).a},"6c58":function(e,n,t){"use strict";(function(e){var i=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(t("7eb4")),o=i(t("ee10")),s=t("9b69"),r=t("d9e3"),c=t("7508"),l=i(t("84f6")),u=t("6fe6"),m=t("7cec"),f={components:{lPainter:function(){Promise.all([t.e("pages_game/common/vendor"),t.e("pages_game/components/lime-painter/components/l-painter/l-painter")]).then(function(){return resolve(t("2ace"))}.bind(null,t)).catch(t.oe)},lPainterView:function(){Promise.all([t.e("pages_game/common/vendor"),t.e("pages_game/components/lime-painter/components/l-painter-view/l-painter-view")]).then(function(){return resolve(t("b62f"))}.bind(null,t)).catch(t.oe)},lPainterImage:function(){Promise.all([t.e("pages_game/common/vendor"),t.e("pages_game/components/lime-painter/components/l-painter-image/l-painter-image")]).then(function(){return resolve(t("27d7"))}.bind(null,t)).catch(t.oe)},lPainterText:function(){Promise.all([t.e("pages_game/common/vendor"),t.e("pages_game/components/lime-painter/components/l-painter-text/l-painter-text")]).then(function(){return resolve(t("121d"))}.bind(null,t)).catch(t.oe)}},data:function(){return{picture:"",picture2:"",show:!1,itemdata:{},businessType:1,beginTime:"",endTime:"",mpQrcode:"",id:"",page:"",pageType:"",iosFirstOpenCamera:!0,internationalAdKey:117,shareTopImage:""}},onLoad:function(n){this.itemdata=JSON.parse(decodeURIComponent(n.itemdata)),console.log(this.itemdata),this.businessType=n.businessType,3==this.businessType?(this.beginTime=(0,r.formatTime)(this.itemdata.beginTime,"yyyy.mm.dd"),this.endTime=(0,r.formatTime)(this.itemdata.endTime,"yyyy.mm.dd"),this.page="pages_plan/plan/plandetail",this.pageType="plandetail_event_info",this.id=this.itemdata.id,this.findShareImg(this.itemdata.planInfoId)):4==this.businessType&&(this.beginTime=(0,r.formatTime)(this.itemdata.beginTime,"yyyy.mm.dd"),this.endTime=(0,r.formatTime)(this.itemdata.endTime,"yyyy.mm.dd"),this.page="pages_plan/plan/specialtopicdetailwithouttab",this.pageType="specialtopic_withouttab_event_info",this.id=this.itemdata.id,this.findShareImg(this.itemdata.id)),console.log("this.businessType",this.businessType),this.getMpQrcode(),e.getStorageSync("iosFirstOpenCamera")&&(this.iosFirstOpenCamera=e.getStorageSync("iosFirstOpenCamera")),console.log("this.iosFirstOpenCamera",this.iosFirstOpenCamera)},methods:{fail:function(e){console.log(e)},done:function(e){console.log("绘制完成")},getMpQrcode:function(){var n=this;(0,s.get_wx_acodeun_limit)({wxSceneType:this.pageType,id:this.id}).then((function(e){})).catch((function(t){console.log("get_wx_acodeun_limiterr",t),n.mpQrcode="data:image/png;base64,"+e.arrayBufferToBase64(t),console.log("this.mpQrcode",n.mpQrcode)}))},save:function(e){var n=this;this.$refs.poster.canvasToTempFilePathSync({fileType:"jpg",quality:1,success:function(t){console.log(t.tempFilePath),n.picture2=t.tempFilePath,3==e?n.shareQqImg():4==e?n.saveImage():n.shareImg(e)},fail:function(e){console.log("???????????",e)}})},shareWxMini:function(){console.log("分享title",this.itemdata.name),console.log("分享image",this.itemdata.imageUrl),e.share({provider:"weixin",scene:"WXSceneSession",type:5,imageUrl:this.itemdata.imageUrl,title:this.itemdata.name,miniProgram:{id:u.mpGhId,path:this.page+"?id="+this.id,type:0,webUrl:"https://www.kgbs.top/"},success:function(e){console.log("分享成功:",JSON.stringify(e))},fail:function(e){console.log("分享失败:"+JSON.stringify(e))}})},shareImg:function(n){e.share({provider:"weixin",scene:1==n?"WXSceneSession":"WXSceneTimeline",type:2,imageUrl:this.picture2,success:function(e){console.log("success:"+JSON.stringify(e))},fail:function(e){console.log("fail:"+JSON.stringify(e))}})},shareQqImg:function(){e.share({provider:"qq",type:2,Scene:"WXSenceTimeline",title:"知识岛",imageUrl:this.picture2,success:function(e){console.log("success:"+JSON.stringify(e))},fail:function(e){console.log("fail:"+JSON.stringify(e))}})},saveImage:function(){var n=this;console.log("iosFirstOpenCamera",this.iosFirstOpenCamera),"ios"===e.getSystemInfoSync().platform&&this.iosFirstOpenCamera?(e.setStorageSync("iosFirstOpenCamera",!1),this.iosFirstOpenCamera=!1,e.saveImageToPhotosAlbum({filePath:this.picture2,success:function(n){e.showToast({title:"已保存到相册",icon:"success",duration:2e3})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})):(0,c.permissionCheck)().then((function(t){e.saveImageToPhotosAlbum({filePath:n.picture2,success:function(n){e.showToast({title:"已保存到相册",icon:"success",duration:2e3})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})})).catch((function(n){e.showModal({title:"手机权限",content:n,success:function(e){e.confirm?(0,c.phonePermissionSetting)():e.cancel}})}))},requestAndroidPermission:function(n){var t=this;return(0,o.default)(a.default.mark((function i(){var o;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.default.requestAndroidPermission(n);case 2:1==(o=i.sent)?e.saveImageToPhotosAlbum({filePath:t.picture2,success:function(n){e.showToast({title:"已保存到相册",icon:"success",duration:2e3})},fail:function(e){console.log("fail:"+JSON.stringify(e))}}):0==o||e.showModal({content:"媒体和文件权限被拒绝，请开启",showCancel:!1,confirmText:"开启权限",success:function(e){e.confirm&&l.default.gotoAppPermissionSetting()}});case 4:case"end":return i.stop()}}),i)})))()},findShareImg:function(e){var n=this;(0,m.getAdInfoListByChannel)({channel:1,keyNumList:[this.internationalAdKey]}).then((function(t){if(t.data){console.log("接口的数据:"+JSON.stringify(t)),console.log("计划的id:"+e);for(var i=0;i<t.data[0].infoImgList.length;i++)if(t.data[0].infoImgList[i].resourceId==e){n.shareTopImage=t.data[0].infoImgList[i].imageUrl;break}}})).catch((function(e){}))},cancleFun:function(){e.navigateBack({delta:1})},back:function(){e.navigateBack()},showShareItem:function(){this.$refs.popup.open()}}};n.default=f}).call(this,t("df3c").default)},"7b4f":function(e,n,t){},a7de:function(e,n,t){"use strict";t.r(n);var i=t("3ab7"),a=t("b649");for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);t("4d10"),t("cd5c");var s=t("828b"),r=Object(s.a)(a.default,i.b,i.c,!1,null,"766ed66b",null,!1,i.a,void 0);n.default=r.exports},b649:function(e,n,t){"use strict";t.r(n);var i=t("6c58"),a=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n.default=a.a},cd5c:function(e,n,t){"use strict";var i=t("0fbd");t.n(i).a},e3a0:function(e,n,t){"use strict";(function(e,n){var i=t("47a9");t("42bd"),t("861b"),i(t("3240"));var a=i(t("a7de"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("3223").default,t("df3c").createPage)}},[["e3a0","common/runtime","common/vendor"]]]);
},{isPage:true,isComponent:true,currentFile:'pages_game/gameevent/shareforplan.js'});require("pages_game/gameevent/shareforplan.js");