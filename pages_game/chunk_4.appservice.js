$gwx2_XC_10=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx2_XC_10 || [];
function gz$gwx2_XC_10_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_1)return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_1
__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_1);return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_1
}
function gz$gwx2_XC_10_2(){
if( __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_2)return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_2
__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_2=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_2);return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_2
}
function gz$gwx2_XC_10_3(){
if( __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_3)return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_3
__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_3=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_3);return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_3
}
function gz$gwx2_XC_10_4(){
if( __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_4)return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_4
__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_4=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'lime-painter vue-ref'])
Z([3,'limepainter'])
Z([[2,'&&'],[[7],[3,'canvasId']],[[7],[3,'size']]])
})(__WXML_GLOBAL__.ops_cached.$gwx2_XC_10_4);return __WXML_GLOBAL__.ops_cached.$gwx2_XC_10_4
}
__WXML_GLOBAL__.ops_set.$gwx2_XC_10=z;
__WXML_GLOBAL__.ops_init.$gwx2_XC_10=true;
var x=['./pages_game/components/lime-painter/components/l-painter-image/l-painter-image.wxml','./pages_game/components/lime-painter/components/l-painter-text/l-painter-text.wxml','./pages_game/components/lime-painter/components/l-painter-view/l-painter-view.wxml','./pages_game/components/lime-painter/components/l-painter/l-painter.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx2_XC_10_1()
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
d_[x[1]]={}
var m1=function(e,s,r,gg){
var z=gz$gwx2_XC_10_2()
var a0L=_n('slot')
_(r,a0L)
return r
}
e_[x[1]]={f:m1,j:[],i:[],ti:[],ic:[]}
d_[x[2]]={}
var m2=function(e,s,r,gg){
var z=gz$gwx2_XC_10_3()
var eBM=_n('slot')
_(r,eBM)
return r
}
e_[x[2]]={f:m2,j:[],i:[],ti:[],ic:[]}
d_[x[3]]={}
var m3=function(e,s,r,gg){
var z=gz$gwx2_XC_10_4()
var oDM=_mz(z,'view',['class',0,'data-ref',1],[],e,s,gg)
var xEM=_v()
_(oDM,xEM)
if(_oz(z,2,e,s,gg)){xEM.wxVkey=1
}
var oFM=_n('slot')
_(oDM,oFM)
xEM.wxXCkey=1
_(r,oDM)
return r
}
e_[x[3]]={f:m3,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx2_XC_10";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx2_XC_10();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages_game/components/lime-painter/components/l-painter-image/l-painter-image.wxml'] = [$gwx2_XC_10, './pages_game/components/lime-painter/components/l-painter-image/l-painter-image.wxml'];else __wxAppCode__['pages_game/components/lime-painter/components/l-painter-image/l-painter-image.wxml'] = $gwx2_XC_10( './pages_game/components/lime-painter/components/l-painter-image/l-painter-image.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages_game/components/lime-painter/components/l-painter-text/l-painter-text.wxml'] = [$gwx2_XC_10, './pages_game/components/lime-painter/components/l-painter-text/l-painter-text.wxml'];else __wxAppCode__['pages_game/components/lime-painter/components/l-painter-text/l-painter-text.wxml'] = $gwx2_XC_10( './pages_game/components/lime-painter/components/l-painter-text/l-painter-text.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages_game/components/lime-painter/components/l-painter-view/l-painter-view.wxml'] = [$gwx2_XC_10, './pages_game/components/lime-painter/components/l-painter-view/l-painter-view.wxml'];else __wxAppCode__['pages_game/components/lime-painter/components/l-painter-view/l-painter-view.wxml'] = $gwx2_XC_10( './pages_game/components/lime-painter/components/l-painter-view/l-painter-view.wxml' );
		if (__vd_version_info__.delayedGwx) __wxAppCode__['pages_game/components/lime-painter/components/l-painter/l-painter.wxml'] = [$gwx2_XC_10, './pages_game/components/lime-painter/components/l-painter/l-painter.wxml'];else __wxAppCode__['pages_game/components/lime-painter/components/l-painter/l-painter.wxml'] = $gwx2_XC_10( './pages_game/components/lime-painter/components/l-painter/l-painter.wxml' );
	;__wxRoute = "pages_game/components/lime-painter/components/l-painter-image/l-painter-image";__wxRouteBegin = true;__wxAppCurrentFile__="pages_game/components/lime-painter/components/l-painter-image/l-painter-image.js";define("pages_game/components/lime-painter/components/l-painter-image/l-painter-image.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
require("../../../../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages_game/components/lime-painter/components/l-painter-image/l-painter-image"],{"27d7":function(e,n,t){"use strict";t.r(n);var a=t("3068"),i=t("6f09");for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);var r=t("828b"),c=Object(r.a)(i.default,a.b,a.c,!1,null,null,null,!1,a.a,void 0);n.default=c.exports},3068:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){}));var a=function(){this.$createElement,this._self._c},i=[]},"466d":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a={name:"lime-painter-image",mixins:[(0,t("fc8b").children)("painter")],props:{id:String,css:[String,Object],src:String},data:function(){return{type:"image",el:{css:{},src:null}}}};n.default=a},"6f09":function(e,n,t){"use strict";t.r(n);var a=t("466d"),i=t.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n.default=i.a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages_game/components/lime-painter/components/l-painter-image/l-painter-image-create-component",{"pages_game/components/lime-painter/components/l-painter-image/l-painter-image-create-component":function(e,n,t){t("df3c").createComponent(t("27d7"))}},[["pages_game/components/lime-painter/components/l-painter-image/l-painter-image-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'pages_game/components/lime-painter/components/l-painter-image/l-painter-image.js'});require("pages_game/components/lime-painter/components/l-painter-image/l-painter-image.js");;__wxRoute = "pages_game/components/lime-painter/components/l-painter-text/l-painter-text";__wxRouteBegin = true;__wxAppCurrentFile__="pages_game/components/lime-painter/components/l-painter-text/l-painter-text.js";define("pages_game/components/lime-painter/components/l-painter-text/l-painter-text.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
require("../../../../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages_game/components/lime-painter/components/l-painter-text/l-painter-text"],{"121d":function(e,t,n){"use strict";n.r(t);var a=n("75e1"),o=n("b135");for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);var i=n("828b"),c=Object(i.a)(o.default,a.b,a.c,!1,null,null,null,!1,a.a,void 0);t.default=c.exports},"3e18":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"lime-painter-text",mixins:[(0,n("fc8b").children)("painter")],props:{uid:String,css:[String,Object],text:[String,Number],replace:Object},data:function(){return{type:"text",el:{css:{},text:null}}}};t.default=a},"75e1":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){this.$createElement,this._self._c},o=[]},b135:function(e,t,n){"use strict";n.r(t);var a=n("3e18"),o=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t.default=o.a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages_game/components/lime-painter/components/l-painter-text/l-painter-text-create-component",{"pages_game/components/lime-painter/components/l-painter-text/l-painter-text-create-component":function(e,t,n){n("df3c").createComponent(n("121d"))}},[["pages_game/components/lime-painter/components/l-painter-text/l-painter-text-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'pages_game/components/lime-painter/components/l-painter-text/l-painter-text.js'});require("pages_game/components/lime-painter/components/l-painter-text/l-painter-text.js");;__wxRoute = "pages_game/components/lime-painter/components/l-painter-view/l-painter-view";__wxRouteBegin = true;__wxAppCurrentFile__="pages_game/components/lime-painter/components/l-painter-view/l-painter-view.js";define("pages_game/components/lime-painter/components/l-painter-view/l-painter-view.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
require("../../../../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages_game/components/lime-painter/components/l-painter-view/l-painter-view"],{"5c23":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t("fc8b"),a={name:"lime-painter-view",mixins:[(0,i.children)("painter"),(0,i.parent)("painter")],props:{id:String,css:[String,Object]},data:function(){return{type:"view",el:{css:{},views:[]}}},mounted:function(){}};n.default=a},aca4:function(e,n,t){"use strict";t.r(n);var i=t("5c23"),a=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n.default=a.a},b62f:function(e,n,t){"use strict";t.r(n);var i=t("cba2"),a=t("aca4");for(var o in a)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(o);var c=t("828b"),r=Object(c.a)(a.default,i.b,i.c,!1,null,null,null,!1,i.a,void 0);n.default=r.exports},cba2:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){}));var i=function(){this.$createElement,this._self._c},a=[]}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages_game/components/lime-painter/components/l-painter-view/l-painter-view-create-component",{"pages_game/components/lime-painter/components/l-painter-view/l-painter-view-create-component":function(e,n,t){t("df3c").createComponent(t("b62f"))}},[["pages_game/components/lime-painter/components/l-painter-view/l-painter-view-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'pages_game/components/lime-painter/components/l-painter-view/l-painter-view.js'});require("pages_game/components/lime-painter/components/l-painter-view/l-painter-view.js");;__wxRoute = "pages_game/components/lime-painter/components/l-painter/l-painter";__wxRouteBegin = true;__wxAppCurrentFile__="pages_game/components/lime-painter/components/l-painter/l-painter.js";define("pages_game/components/lime-painter/components/l-painter/l-painter.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
require("../../../../common/vendor.js"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages_game/components/lime-painter/components/l-painter/l-painter"],{"2ace":function(e,t,n){"use strict";n.r(t);var r=n("3727"),a=n("9929");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("3764");var s=n("828b"),c=Object(s.a)(a.default,r.b,r.c,!1,null,null,null,!1,r.a,void 0);t.default=c.exports},3727:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var r=function(){this.$createElement,this._self._c},a=[]},3764:function(e,t,n){"use strict";var r=n("84cc");n.n(r).a},"84cc":function(e,t,n){},9929:function(e,t,n){"use strict";n.r(t);var r=n("ae28"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},ae28:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("7eb4")),i=r(n("ee10")),s=n("fc8b"),c=r(n("ff80")),o=n("7520"),u=r(n("000d")),d={name:"lime-painter",mixins:[c.default,(0,s.parent)("painter"),{}],data:function(){return{use2dCanvas:!1,canvasHeight:150,canvasWidth:null,parentWidth:0,inited:!1,progress:0,firstRender:0,done:!1,isPC:!1}},computed:{styles:function(){return"".concat(this.size).concat(this.customStyle||"",";")+(this.hidden&&"position: fixed; left: 1500rpx;")},canvasId:function(){return"l-painter".concat(this._&&this._.uid||this._uid)},size:function(){if(this.boardWidth&&this.boardHeight)return"width:".concat(this.boardWidth,"px; height: ").concat(this.boardHeight,"px;")},dpr:function(){return this.pixelRatio||e.getSystemInfoSync().pixelRatio},boardWidth:function(){var e=(this.elements&&this.elements.css||this.elements||this).width,t=void 0===e?0:e,n=(0,o.toPx)(t||this.width);return n||Math.max(n,(0,o.toPx)(this.canvasWidth))},boardHeight:function(){var e=(this.elements&&this.elements.css||this.elements||this).height,t=void 0===e?0:e,n=(0,o.toPx)(t||this.height);return n||Math.max(n,(0,o.toPx)(this.canvasHeight))},hasBoard:function(){return this.board&&Object.keys(this.board).length},elements:function(){return this.hasBoard?this.board:JSON.parse(JSON.stringify(this.el))}},created:function(){this.show=!0,this.use2dCanvas="2d"===this.type&&(0,o.canIUseCanvas2d)(),this.isPC=o.isPC},mounted:function(){var e=this;return(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.sleep)(30);case 2:return t.next=4,e.getParentWeith();case 4:e.$nextTick((function(){setTimeout((function(){e.$watch("elements",e.watchRender,{deep:!0,immediate:!0})}),30)}));case 5:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.done=!1,this.inited=!1,this.firstRender=0,this.progress=0,this.painter=null,clearTimeout(this.rendertimer)},methods:{watchRender:function(e,t){var n=this;return(0,i.default)(a.default.mark((function r(){return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&e.views&&(n.firstRender?n.firstRender:e.views.length)&&Object.keys(e).length&&JSON.stringify(e)!=JSON.stringify(t)){r.next=2;break}return r.abrupt("return");case 2:n.firstRender=1,n.progress=0,n.done=!1,clearTimeout(n.rendertimer),n.rendertimer=setTimeout((function(){n.render(e)}),n.beforeDelay);case 7:case"end":return r.stop()}}),r)})))()},setFilePath:function(e,t){var n=this;return(0,i.default)(a.default.mark((function r(){var i,s,c;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e,s=(t||n).pathType,"base64"!=(c=void 0===s?n.pathType:s)||(0,o.isBase64)(e)){r.next=8;break}return r.next=5,(0,o.pathToBase64)(e);case 5:i=r.sent,r.next=12;break;case 8:if("url"!=c||!(0,o.isBase64)(e)){r.next=12;break}return r.next=11,(0,o.base64ToPath)(e);case 11:i=r.sent;case 12:return t&&t.isEmit&&n.$emit("success",i),r.abrupt("return",i);case 14:case"end":return r.stop()}}),r)})))()},getSize:function(e){var t=this;return(0,i.default)(a.default.mark((function n(){var r,i,s,c;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.css||e,i=r.width,s=e.css||e,c=s.height,t.size){n.next=12;break}if(!i&&!c){n.next=10;break}return t.canvasWidth=i||t.canvasWidth,t.canvasHeight=c||t.canvasHeight,n.next=8,(0,o.sleep)(30);case 8:n.next=12;break;case 10:return n.next=12,t.getParentWeith();case 12:case"end":return n.stop()}}),n)})))()},canvasToTempFilePathSync:function(e){var t=this;this.stopWatch=this.$watch("done",(function(n){n&&(t.canvasToTempFilePath(e),t.stopWatch&&t.stopWatch())}),{immediate:!0})},getParentWeith:function(){var t=this;return new Promise((function(n){e.createSelectorQuery().in(t).select(".lime-painter").boundingClientRect().exec((function(e){var r=e[0]||{},a=r.width,i=r.height;t.parentWidth=Math.ceil(a||0),t.canvasWidth=t.parentWidth||300,t.canvasHeight=i||t.canvasHeight||150,n(e[0])}))}))},render:function(){var e=arguments,t=this;return(0,i.default)(a.default.mark((function n(){var r,i,s,c,d,h,f,l,p,v,m,x,g;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},Object.keys(r).length){n.next=3;break}return n.abrupt("return",console.error("空对象"));case 3:return t.progress=0,t.done=!1,n.next=7,t.getSize(r);case 7:return n.next=9,t.getContext();case 9:if(i=n.sent,s=t.use2dCanvas,c=t.boardWidth,d=t.boardHeight,h=t.canvas,f=t.afterDelay,!s||h){n.next=13;break}return n.abrupt("return",Promise.reject(new Error("canvas 没创建")));case 13:return t.boundary={top:0,left:0,width:c,height:d},t.painter=null,t.painter||(l=r.css||r,p=l.width,(r.css||r).height,!p&&t.parentWidth&&Object.assign(r,{width:t.parentWidth}),v={context:i,canvas:h,width:c,height:d,pixelRatio:t.dpr,useCORS:t.useCORS,createImage:o.getImageInfo.bind(t),performance:t.performance,listen:{onProgress:function(e){t.progress=e,t.$emit("progress",e)},onEffectFail:function(e){t.$emit("faill",e)}}},t.painter=new u.default(v)),n.next=18,t.painter.source(JSON.parse(JSON.stringify(r)));case 18:return m=n.sent,x=m.width,g=m.height,t.boundary.height=t.canvasHeight=g,t.boundary.width=t.canvasWidth=x,n.next=25,(0,o.sleep)(t.sleep);case 25:return n.next=27,t.painter.render();case 27:return n.next=29,new Promise((function(e){return t.$nextTick(e)}));case 29:if(s){n.next=32;break}return n.next=32,t.canvasDraw();case 32:if(!f||!s){n.next=35;break}return n.next=35,(0,o.sleep)(f);case 35:return t.$emit("done"),t.done=!0,t.isCanvasToTempFilePath&&t.canvasToTempFilePath().then((function(e){t.$emit("success",e.tempFilePath)})).catch((function(e){t.$emit("fail",new Error(JSON.stringify(e)))})),n.abrupt("return",Promise.resolve({ctx:i,draw:t.painter,node:t.node}));case 39:case"end":return n.stop()}}),n)})))()},canvasDraw:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n,r){return e.ctx.draw(t,(function(){return setTimeout((function(){return n()}),e.afterDelay)}))}))},getContext:function(){var t=this;return(0,i.default)(a.default.mark((function n(){var r,i,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.canvasWidth){n.next=4;break}return t.$emit("fail","painter no size"),console.error("[lime-painter]: 给画板或父级设置尺寸"),n.abrupt("return",Promise.reject());case 4:if(!t.ctx||!t.inited){n.next=6;break}return n.abrupt("return",Promise.resolve(t.ctx));case 6:if(r=t.type,i=t.use2dCanvas,t.dpr,t.boardWidth,t.boardHeight,s=function(){return new Promise((function(n){e.createSelectorQuery().in(t).select("#".concat(t.canvasId)).boundingClientRect().exec((function(r){if(r){var a=e.createCanvasContext(t.canvasId,t);t.inited||(t.inited=!0,t.use2dCanvas=!1,t.canvas=r),t.ctx=a,n(t.ctx)}else console.error("[lime-painter] no node")}))}))},i){n.next=10;break}return n.abrupt("return",s());case 10:return n.abrupt("return",new Promise((function(n){e.createSelectorQuery().in(t).select("#".concat(t.canvasId)).node().exec((function(e){var a=(e&&e[0]||{}).node;if(a){var i=a.getContext(r);t.inited||(t.inited=!0,t.use2dCanvas=!0,t.canvas=a),t.ctx=i,n(t.ctx)}else console.error("[lime-painter]: no size")}))})));case 11:case"end":return n.stop()}}),n)})))()},canvasToTempFilePath:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var r=(0,i.default)(a.default.mark((function r(s,c){var o,u,d,h,f,l,p,v,m,x,g,b,w,P,y,k,T,C;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.use2dCanvas,u=t.canvasId,d=t.dpr,h=t.fileType,f=t.quality,l=function(){var e=(0,i.default)(a.default.mark((function e(r){var i,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.setFilePath(r.tempFilePath||r,n);case 3:i=e.sent,c=Object.assign(r,{tempFilePath:i}),n.success&&n.success(c),s(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.$emit("fail",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),p=t.boundary||t,v=p.top,m=void 0===v?0:v,x=p.left,g=void 0===x?0:x,b=p.width,w=p.height,P=b*d,y=w*d,k=Object.assign({x:g,y:m,width:b,height:w,destWidth:P,destHeight:y,canvasId:u,fileType:h,quality:f},n,{success:l}),(t.isPC||o)&&(k.canvas=t.canvas),!o||t.isPC){r.next=27;break}if(r.prev=8,T=t.canvas.toDataURL("image/".concat(n.fileType||h).replace(/pg/,"peg"),n.quality||f),!/data:,/.test(T)){r.next=14;break}e.canvasToTempFilePath(k,t),r.next=19;break;case 14:return r.next=16,t.setFilePath(T,n);case 16:C=r.sent,n.success&&n.success({tempFilePath:C}),s({tempFilePath:C});case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(8),n.fail&&n.fail(r.t0),c(r.t0);case 25:r.next=28;break;case 27:e.canvasToTempFilePath(k,t);case 28:case"end":return r.stop()}}),r,null,[[8,21]])})));return function(e,t){return r.apply(this,arguments)}}())}}};t.default=d}).call(this,n("df3c").default)}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages_game/components/lime-painter/components/l-painter/l-painter-create-component",{"pages_game/components/lime-painter/components/l-painter/l-painter-create-component":function(e,t,n){n("df3c").createComponent(n("2ace"))}},[["pages_game/components/lime-painter/components/l-painter/l-painter-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'pages_game/components/lime-painter/components/l-painter/l-painter.js'});require("pages_game/components/lime-painter/components/l-painter/l-painter.js");