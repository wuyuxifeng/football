$gwx_XC_33=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_33 || [];
function gz$gwx_XC_33_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_33_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_33_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_33_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'show']])
Z([3,'lime-signature vue-ref'])
Z([3,'limeSignature'])
Z([[6],[[7],[3,'$root']],[3,'s0']])
Z([[7],[3,'showOffscreen']])
Z([[7],[3,'showMask']])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_33_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_33_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_33=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_33=true;
var x=['./uni_modules/lime-signature/components/l-signature/l-signature.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_33_1()
var oXP=_v()
_(r,oXP)
if(_oz(z,0,e,s,gg)){oXP.wxVkey=1
var fYP=_mz(z,'view',['class',1,'data-ref',1,'style',2],[],e,s,gg)
var cZP=_v()
_(fYP,cZP)
if(_oz(z,4,e,s,gg)){cZP.wxVkey=1
}
var h1P=_v()
_(fYP,h1P)
if(_oz(z,5,e,s,gg)){h1P.wxVkey=1
}
cZP.wxXCkey=1
h1P.wxXCkey=1
_(oXP,fYP)
}
oXP.wxXCkey=1
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_33";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_33();	if (__vd_version_info__.delayedGwx) __wxAppCode__['uni_modules/lime-signature/components/l-signature/l-signature.wxml'] = [$gwx_XC_33, './uni_modules/lime-signature/components/l-signature/l-signature.wxml'];else __wxAppCode__['uni_modules/lime-signature/components/l-signature/l-signature.wxml'] = $gwx_XC_33( './uni_modules/lime-signature/components/l-signature/l-signature.wxml' );
	;__wxRoute = "uni_modules/lime-signature/components/l-signature/l-signature";__wxRouteBegin = true;__wxAppCurrentFile__="uni_modules/lime-signature/components/l-signature/l-signature.js";define("uni_modules/lime-signature/components/l-signature/l-signature.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
(global.webpackJsonp=global.webpackJsonp||[]).push([["uni_modules/lime-signature/components/l-signature/l-signature"],{1036:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){}));var a=function(){this.$createElement;var t=(this._self._c,this.show?this.__get_style([this.canvasStyle,this.styles]):null);this.$mp.data=Object.assign({},{$root:{s0:t}})},s=[]},"1d8c":function(t,e,n){},"32bd":function(t,e,n){"use strict";var a=n("1d8c");n.n(a).a},"3d9e":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(n("7eb4")),i=a(n("7ca3")),r=a(n("34cf")),c=a(n("ee10")),o=n("4722"),u=n("a254"),f=n("9fd3"),h=a(n("650c"));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n("3240");var g={props:h.default,data:function(){return{canvasWidth:null,canvasHeight:null,offscreenWidth:null,offscreenHeight:null,useCanvas2d:!0,show:!0,offscreenStyles:"",showMask:!1,showOffscreen:!1,isPC:!1}},computed:{canvasId:function(){return"lime-signature".concat(this._uid)},offscreenId:function(){return this.canvasId+"offscreen"},offscreenSize:function(){var t=this.offscreenWidth,e=this.offscreenHeight;return this.landscape?[e,t]:[t,e]},canvasStyle:function(){var t=this.canvasWidth,e=this.canvasHeight;return{width:t&&t+"px",height:e&&e+"px",background:this.backgroundColor}},param:function(){var t=this.penColor,e=this.penSize,n=this.backgroundColor,a=this.backgroundImage,s=this.landscape,i=this.boundingBox,r=this.openSmooth,c=this.minLineWidth,o=this.maxLineWidth,u=this.minSpeed,f=this.maxWidthDiffRate,h=this.maxHistoryLength,l=this.disableScroll,d=this.disabled;return JSON.parse(JSON.stringify({penColor:t,penSize:e,backgroundColor:n,backgroundImage:a,landscape:s,boundingBox:i,openSmooth:r,minLineWidth:c,maxLineWidth:o,minSpeed:u,maxWidthDiffRate:f,maxHistoryLength:h,disableScroll:l,disabled:d}))}},created:function(){var e=t.getSystemInfoSync().platform;this.isPC=/windows|mac/.test(e),this.useCanvas2d="2d"==this.type&&(0,o.canIUseCanvas2d)()&&!this.isPC,this.showMask=this.isPC},mounted:function(){var t=this;return(0,c.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.beforeDelay){e.next=3;break}return e.next=3,(0,o.sleep)(t.beforeDelay);case 3:return e.next=5,t.getContext();case 5:n=e.sent,t.signature=new u.Signature(n),t.canvasEl=t.signature.canvas.get("el"),t.offscreenWidth=t.canvasWidth=t.signature.canvas.get("width"),t.offscreenHeight=t.canvasHeight=t.signature.canvas.get("height"),t.stopWatch=t.$watch("param",(function(e){t.signature.pen.setOption(e)}),{immediate:!0});case 11:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.stopWatch&&this.stopWatch(),this.signature.destroy(),this.show=!1,this.signature=null},methods:{redo:function(){this.signature&&this.signature.redo()},restore:function(){this.redo()},undo:function(){this.signature&&this.signature.undo()},clear:function(){this.signature&&this.signature.clear()},isEmpty:function(){return this.signature.isEmpty()},canvasToMaskPath:function(){var e=arguments,n=this;return(0,c.default)(s.default.mark((function a(){var i,r,c,u,h,l,d,g,p,v;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:{},r=n.isEmpty(),n.showOffscreen=!0,c=n.signature.canvas.get("width"),u=n.signature.canvas.get("height"),h=t.getSystemInfoSync(),l=h.pixelRatio,n.useCanvas2d?(n.offscreenWidth=c*l,n.offscreenHeight=u*l):(n.offscreenWidth=c,n.offscreenHeight=u),a.next=9,(0,o.sleep)(100);case 9:d=t.createCanvasContext("offscreen",n),g=Math.max(n.offscreenWidth,n.offscreenHeight),p=function(t){return i.success&&i.success(t)},v=function(t){return i.fail&&i.fail(t)},n.signature.pen.getMaskedImageData((function(e){!function(e,n){t.canvasPutImageData?t.canvasPutImageData(e,n):d.putImageData&&d.putImageData(e)}({canvasId:"offscreen",x:0,y:0,width:c,height:u,data:e,fail:function(t){v(t)},success:function(t){(0,f.toDataURL)("offscreen",n,i).then((function(t){d.restore(),d.clearRect(0,0,g,g),n.offscreenWidth=c,n.offscreenHeight=u,n.showOffscreen=!1,p({tempFilePath:t,isEmpty:r})}))}},n)}));case 14:case"end":return a.stop()}}),a)})))()},canvasToTempFilePath:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.isEmpty(),i=this.useCanvas2d,u=function(t){return n.success&&n.success(t)},h=function(t){return n.fail&&n.fail(t)},l=this.signature.canvas.get("el"),d=l.canvas,g=this.backgroundColor,p=this.landscape,v=this.boundingBox,m=this.signature.canvas.get("width"),b=this.signature.canvas.get("height"),w=0,y=0,x="devtools"==t.getSystemInfoSync().platform,C=this.preferToDataURL,O=1,S=function(){var h=(0,c.default)(s.default.mark((function c(h){var l,w,y,S,E,I;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(l=function(){if(i&&t.createOffscreenCanvas&&C&&!x){var n=t.createOffscreenCanvas({type:"2d"});return n.width=e.offscreenSize[0]*O,n.height=e.offscreenSize[1]*O,[n.getContext("2d"),n]}return[t.createCanvasContext("offscreen",e)]},!(v&&!e.isPC||p||g&&!(0,o.isTransparent)(g))){s.next=13;break}return e.showOffscreen=!0,s.next=5,(0,o.sleep)(100);case 5:w=l(),y=(0,r.default)(w,2),S=y[0],E=y[1],S.save(),S.setTransform(1,0,0,1,0,0),p&&(S.translate(0,m*O),S.rotate(-Math.PI/2)),g&&!(0,o.isTransparent)(g)&&(S.fillStyle=g,S.fillRect(0,0,m,b)),E?((I=d.createImage()).src=h,I.onload=function(){S.drawImage(I,0,0,m*O,b*O);var t=E.toDataURL();e.showOffscreen=!1,u({tempFilePath:t,isEmpty:a})}):(S.drawImage(h,0,0,m*O,b*O),S.draw(!1,(function(){(0,f.toDataURL)("offscreen",e,n).then((function(t){var n=Math.max(m,b);S.restore(),S.clearRect(0,0,n,n),e.showOffscreen=!1,u({tempFilePath:t,isEmpty:a})}))}))),s.next=14;break;case 13:u({tempFilePath:h,isEmpty:a});case 14:case"end":return s.stop()}}),c)})));return function(t){return h.apply(this,arguments)}}(),E=function(){var t=(0,c.default)(s.default.mark((function t(){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.offscreenWidth==m&&e.offscreenHeight==b){t.next=5;break}return e.offscreenWidth=m,e.offscreenHeight=b,t.next=5,(0,o.sleep)(100);case 5:n={x:w,y:y,width:m,height:b,canvas:i?d:null,preferToDataURL:C},(0,f.toDataURL)(e.canvasId,e,n).then(S).catch(h);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();v&&!this.isPC?this.signature.getContentBoundingBox(function(){var t=(0,c.default)(s.default.mark((function t(n){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.offscreenWidth=m=n.width,e.offscreenHeight=b=n.height,w=n.startX,y=n.startY,E();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):E()},getContext:function(){var e=this;return(0,o.getRect)("#".concat(this.canvasId),{context:this,type:this.useCanvas2d?"fields":"boundingClientRect"}).then((function(n){if(n){var a,s=n.width,i=n.height,r=n.node,c=n.left,u=n.top,h=n.right,l=t.getSystemInfoSync().pixelRatio;return r?(a=r.getContext("2d"),r.width=s*l,r.height=i*l):(l=1,a=(0,f.uniContext)(e.canvasId,e),r={getContext:function(t){return"2d"==t?a:null},createImage:f.createImage,toDataURL:function(){return(0,f.toDataURL)(e.canvasId,e)},requestAnimationFrame:o.requestAnimationFrame}),a.clearRect(0,0,s,i),{left:c,top:u,right:h,width:s,height:i,context:a,canvas:r,pixelRatio:l}}}))},getTouch:function(t){var e=this;return this.isPC&&this.canvasRect&&(t.touches=t.touches.map((function(t){return d(d({},t),{},{x:t.clientX-e.canvasRect.left,y:t.clientY-e.canvasRect.top})}))),t},touchStart:function(t){var e=this;this.canvasEl&&(this.isStart=!0,this.isPC?(0,o.getRect)("#".concat(this.canvasId),{context:this}).then((function(n){e.canvasRect=n,e.canvasEl.dispatchEvent("touchstart",(0,o.wrapEvent)(e.getTouch(t)))})):this.canvasEl.dispatchEvent("touchstart",(0,o.wrapEvent)(t)))},touchMove:function(t){!this.canvasEl||!this.isStart&&this.canvasEl||this.canvasEl.dispatchEvent("touchmove",(0,o.wrapEvent)(this.getTouch(t)))},touchEnd:function(t){this.canvasEl&&(this.isStart=!1,this.canvasEl.dispatchEvent("touchend",(0,o.wrapEvent)(t)))}}};e.default=g}).call(this,n("df3c").default)},"4ea5":function(t,e,n){"use strict";n.r(e);var a=n("3d9e"),s=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e.default=s.a},7900:function(t,e,n){"use strict";n.r(e);var a=n("1036"),s=n("4ea5");for(var i in s)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("32bd");var r=n("828b"),c=Object(r.a)(s.default,a.b,a.c,!1,null,null,null,!1,a.a,void 0);e.default=c.exports}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["uni_modules/lime-signature/components/l-signature/l-signature-create-component",{"uni_modules/lime-signature/components/l-signature/l-signature-create-component":function(t,e,n){n("df3c").createComponent(n("7900"))}},[["uni_modules/lime-signature/components/l-signature/l-signature-create-component"]]]);
},{isPage:false,isComponent:true,currentFile:'uni_modules/lime-signature/components/l-signature/l-signature.js'});require("uni_modules/lime-signature/components/l-signature/l-signature.js");